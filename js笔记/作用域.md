# Javascript作用域
## 一、习题
### 1.1
    var tt = 'aa';
      function test(){
         console.log(tt);
         var tt = 'dd';
         console.log(tt);
      }
      test();

### 1.2

    2、var a = 100;
      function testResult(){
         var b = 2 * a;       // NaN ，因为此时a为undefined，2 * undefined = NaN
         var a = 200;
         var c = a / 2;
         console.log(b);
         console.log(c);
      }
      testResult();
解析：

### 1.3
    3、var a = 6;
      setTimeout(function () {
        alert(a);    // 66
        a = 666;
      }, 1000);
      a=66;
> 1、由于定时器的作用函数1秒后才执行 <br>
> 2、在定时器执行前先执行了 a=66,导致全局变量a由6修改为66<br>
> 3、定时器中函数执行时，没有用var来声明a，所有a为全局变量<br>

### 1.4
    4、 var i=0;
	    var t={
	        a:function(){
	            this.timer=setInterval(this.b,30);
	        },
	        b:function(){
	            if(i++<1){
	                console.log(this);   // window
	            }
	        }
	    };
       t.a();
> [this.b修改为：this.b.apply(this)，则b中this执行t](https://segmentfault.com/q/1010000000205169)

### [1.5](http://www.2cto.com/kf/201411/350951.html)
	var name = "xiaoming"; 
	(function(){ 
	  var name = name || "小张";
	  console.info(name);
	})();// 小张
	 
	(function(){
	  name = name || "小张";
	  console.info(name);
	})(); // xiaoming
	 
	(function(){
	  var name2= name;
	  var name = name || "小张";
	  console.info(name, name2);
	})(); // 小张 undefined

解析：<br>
var name2= name;<br>
var name = name || "小张";<br>
console.info(name, name2);<br>
代码执行时：声明提前，赋值留着原地<br>
var name2；    // undefined <br>
var name；      // undefined <br>
name2 = name；<br>
name = name || '小张'


### [1.6](http://www.cnblogs.com/huan-lin/p/3683041.html)
	var a = 1;
	function b() {
	  a = 10;
	  return;
	}
	b();
	alert(a);  // 10
 

	var a = 1;
	function b() {
	  a = 10;
	  return;
	function a() {}
	} 
	b();
	alert(a); // 1


>1、第二个例子多了个function a(){};<br>
>2、JS编译器在背后会把function a() {}编译成 var a=function (){}。此时对于函数内部也有一个a=10; 外面的a些也还是1;根据JS作用域。会先找内部的a,如果找不到再向上一级一级找。
最张alert(a) 就会显示1;

### 1.7 
var foo = 1;
function main(){
	alert(foo);
	var foo = 2;
	alert(this.foo);
	this.foo = 3;
}
main();  
new main();
// undefined 1 undefined undefined 
