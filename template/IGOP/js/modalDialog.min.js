+function(t){function o(o){var e=Array.prototype.slice.call(arguments,1),n=this;return this.each(function(){var l=t(this),a=l.data("mg.modaldialog"),s="object"==typeof o&&o;a||l.data("mg.modaldialog",a=new i(this,s)),"string"==typeof o&&(n=a[o].apply(a,e)||n)}),n}var i=function(o,e){this.$element=t(o),this.options=t.extend({},i.DEFAULTS,e),this.init()};i.DEFAULTS={visible:!0,haveheader:!0,closable:!0,maskClosable:!0,dragdrop:!1},i.prototype.init=function(){this.createDom(),this.data(this.options),this.initEvent()},i.prototype.createDom=function(){var t='<div class="mg-modaldialog mg-dialog  mg-prompt"><div class=" mg-overlay"></div><div class="mg-dialog mg-show"><div class="mg-dialog-content mg-dialog-con">'+this.$element.html()+'</div><div class="mg-dialog-footer mg-dialog-footer-btn"></div></div></div>';this.$element.html(t)},i.prototype.data=function(o){var i="",e=this.$element.find(".mg-dialog-content"),n=this.$element.find(".mg-dialog-footer");if(o.haveheader){var l='<div class="md-dialog-header mg-dialog-header"><p class="md-title mg-dialog-title">'+o.title+"</p>";l+=o.closable?'<div class="mg-dialog_close md-close mg-dialog_close" title="关闭"></div>':"",l+="</div>",e.before(l)}if(o.buttons)for(var a=0,s=o.buttons.length;s>a;a+=1){var d=o.buttons[a];i+='<button class="md-btn  mg-dialog-btn off '+d["class"]+' ">'+d.label+"</button>"}else i='<button class="md-btn mg-dialog-btn off">取消</button><button class="md-btn md-btn-highlight mg-dialog-btn determine">确定</button>',t(".mg-dialog-footer-btn").append(i);n.html(i),"left"===o.footerstyle?n.css("text-align","left"):"center"===o.footerstyle&&n.css("text-align","center"),$dialog=this.$element.find(".mg-dialog"),o.width&&$dialog.css("width",o.width),!o.visible&&this.$element.find(".mg-modaldialog").parent().hide()},i.prototype.initEvent=function(){var o=this,i=this.$element.find(".mg-modaldialog").parent();if(this.$element.on("click",".md-close",function(){i.hide(),o.options.onClose.call(o)}),this.$element.on("click",".md-btn",function(){i.hide();for(var e=o.options.buttons,n=0,l=e.length;l>n;n+=1){var a=e[n];t(this).text()==a.label&&a.onClick.call(o)}}),this.$element.on("click",".mg-overlay",function(){o.options.maskClosable&&(i.hide(),o.options.onClose.call(o))}),this.options.dragdrop){var e,n,l,a,s,d=this.$element.find(".mg-dialog");d.on("mousedown",function(o){o=o||window.event,n=parseInt(o.clientX),l=parseInt(o.clientY),a=parseInt(t(this).css("left")),s=parseInt(t(this).css("top")),e=!0}),d.on("mousemove",function(t){var t=t||window.event,o=parseInt(t.clientX),i=parseInt(t.clientY);if(e){var m=a+(o-n),g=s+(i-l);d.css({left:m,top:g})}}),d.on("mouseup",function(){e=!1})}};var e=t.fn.modaldialog;t.fn.modaldialog=o,t.fn.modaldialog.Constructor=i,t.fn.modaldialog.noConflict=function(){return t.fn.modaldialog=e,this}}(jQuery);